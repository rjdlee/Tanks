import Entity from 'entity/entity';

const MAX_BOUNCES = 1;

export default class Bullet extends Entity
{
	constructor( x, y, angle, speed = -3, p_id = '' )
	{
		super( x, y, 5, 2.5, angle );

		this.p_id = p_id;
		this.num_bounces = 0;

		this.set_speed( speed );
	}

	bounce( edge )
	{
		this.num_bounces++;

		if ( this.num_bounces >= MAX_BOUNCES )
			return true;

		if ( edge.x === 0 )
		{
			if ( this.angle < 0 )
				this.turn_to( -Math.PI - this.angle );
			else
				this.turn_to( Math.PI - this.angle );
		}
		else
		{
			this.turn_to( -this.angle );
		}
	}

	reset()
	{
		this.p_id = '';
		this.num_bounces = 0;
	}
}